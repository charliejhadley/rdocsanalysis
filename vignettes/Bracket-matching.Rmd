---
title: "Bracket-matching"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Bracket-matching}
  %\VignetteEncoding{UTF-8}
  %\VignetteEngine{knitr::rmarkdown}
editor_options: 
  chunk_output_type: console
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(rdocsanalysis)
```

To correctly process the .Rd files we need to extract the distinct sections, which look like this:

> \\examples{
>
> # lines of code
>
> }

This [StackOverflow answer](https://stackoverflow.com/a/49627613/1659890) shows how to use a recursive regex to match {}. With a little bit of modification (via https://regex101.com/r/vduvHi/1) this can be used to split .Rd like text into distinct sections:

```{r}
rd_like_text <- "% Generated by roxygen2: do not edit by hand% Please edit documentation in R/mutate.R\\name{mutate}\\alias{mutate}\\alias{mutate.data.frame}"
rd_section_pattern <- "[a-z]*\\{(?:[^{}]*|(?R))*\\}"

regmatches(rd_like_text, gregexpr(rd_section_pattern, rd_like_text, perl = TRUE))[[1]]
```





